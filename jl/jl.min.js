function jlPostApply(){"detail"===window.history.state.display&&(jobListing.indeedFlag=!0)}var searchState={};!function(a){function f(a,b,c,d){var e=jQuery("#"+a),f=jQuery("."+d);f.sort(function(a,d){var e=jQuery(a).data(b),f=jQuery(d).data(b);return"asc"===c?e>f||"undefined"===f?1:-1:f>e||"undefined"===e?1:-1}),jQuery.each(f,function(a,b){e.append(b)})}function g(b){a("#pagenumber").val(b)}function h(){return a("#pagenumber").val()}function i(b){a("#recordperpage").val(b)}function j(){jQuery("#jl-filter-1-open").toggleClass("btn-filters").toggleClass("btn-filters-active"),"none"===jQuery("#jl-filter-2").css("display")?jQuery("#jl-filter-1-open").html(" Hide Filters"):jQuery("#jl-filter-1-open").html(" Filter Results"),"none"!==jQuery("#jl-filter-3").css("display")&&k(),a("#jl-filter-2").slideToggle({easing:"easeInCubic"})}function k(){"none"===jQuery("#jl-filter-3").css("display")?jQuery("#jl-filter-2-open").html("Fewer Filters"):jQuery("#jl-filter-2-open").html("More Filters"),a("#jl-filter-3").slideToggle({easing:"easeInCubic"})}function l(b,c){c?a("#jl-msg-close").show():a("#jl-msg-close").hide(),a("#jl-msg-text").html(b),a("#jl-msg-box").show(),a("#jl-modal-layer").show()}function m(){a("#jl-modal-layer").hide(),a("#jl-msg-box").hide()}function n(b){a("#jl-map-data").html(b),a("#jl-map-box").show(),a("#jl-modal-layer").show()}function o(){a("#jl-modal-layer").hide(),a("#jl-map-box").hide()}function p(){a("#jl-social-media-box").show(),a("#jl-modal-layer").show()}function q(b){a("#jl-modal-layer").hide(),a("#jl-social-media-box").hide(),a(".synved-social-button-share").each(function(){var c=jobListing.socialURLPlaceholder,d=new RegExp(D(this,b),"g"),e=new RegExp(jobListing.socialTitlePlaceholder,"g");a(this).attr("href",a(this).attr("href").replace(d,c));var f=encodeURIComponent(a(document).attr("title"));a(this).attr("href",a(this).attr("href").replace(e,f))})}function r(b){b.hasOwnProperty("href")&&a("#jl-apply-brookdale").prop("href",b.href),a("#indeed-apply-li").append('<span class="indeed-apply-widget"></span>');var d,c=a(".indeed-apply-widget");for(var e in b)"indeedApply"===e.substr(0,11)&&(d=e.replace("indeedApply","data-indeed-apply-"),c.attr(d,b[e]));a(".indeed-apply-widget").on("DOMNodeInserted",function(b){a(this).removeAttr("style"),a(b.target).hasClass("indeed-apply-button")&&(a(".indeed-apply-button-label").text("Apply via  "),a(".indeed-apply-button-inner").attr("style","background-image: none !important"),a(".indeed-apply-button-cm img").attr("src","http://www.brookdalecareers.com/wp-content/themes/genesis-sample/images/logo-indeed.png"))}),loadIndeedButton(),s()}function s(){setTimeout(function(){a(".indeed-apply-button").length?(a("#jl-apply-now-box").show(),a("#jl-apply-brookdale").removeClass("hidden"),a("#jl-modal-layer").show()):s()},5)}function t(){window.IndeedApply=null,a("#indeed-apply-iframe-holder").remove(),a(".indeed-apply-popup-bg").remove(),a(".indeed-apply-popup").remove(),a(".indeed-apply-widget").remove();var b=document.getElementsByTagName("STYLE");b=a.makeArray(b).filter(function(a){return"#indeed-ia"===a.innerText.substring(0,10)}),a(b).remove()}function u(){a("#jl-apply-brookdale").addClass("hidden"),a("#jl-modal-layer").hide(),a("#jl-apply-now-box").hide(),t()}function v(b,c,e,f){var c="undefined"==typeof c?!1:c,e="undefined"==typeof e?!1:e,f="undefined"==typeof f?"BSLC":f,g=c?"Filtering Jobs...":"Loading Jobs...";l("<br><br>"+g,!1),jQuery.ajax({url:jobListing.ajaxurl,type:"POST",datatype:"html",data:{action:"list_jobs",security:jobListing.security,src:f,srch_args:b,detail_flag:e},success:function(b){if(m(),jQuery("#jl-form-div").css("min-height","0"),"none"!==jQuery("#jl-filter-2").css("display")&&j(),jQuery("#listing-div").html(b),w(),"none"!==a("#jl-sort").val()&&a("#jl-jobs-sort").length>0&&A(a("#jl-jobs-sort")),e)a(".jl-show-details").length&&I(a(".jl-show-details").first()[0],!1);else{var c=X(),f={display:"search",title:d,formString:c.substring(1)};currentState=f,a(document).attr("title",f.title),jobListing.queryFlag?"function"==typeof window.history.replaceState&&window.history.replaceState(f,"",c):("function"==typeof window.history.pushState&&window.history.pushState(f,"",c),"function"==typeof ga&&(ga("set","page",c),ga("send","pageview"))),jobListing.queryFlag=!1}},error:function(a,b,c){m(),jQuery("#jl-form-div").css("min-height","0"),jQuery("#listing-div").html("Error loading page: "+c)}})}function w(){y(),F(),G(),z(),B(),E(),H()}function x(){var b={"jl-keywords":'Keywords separated by spaces are considered to be separated by an " OR ". Example: Sales Manager is treated as Sales OR Manager.  							To search for an exact phrase, enclose the phrase in quotation marks. Example: "Sales Manager".',"jl-zipcode":"Enter either a city (Nashville), a city and state separated by a comma (Brentwood, TN), a state only (TN), or a zipcode (along with the radius field). "};for(var c in b)a("#"+c).attr("title",b[c])}function y(){jQuery("input:checkbox").each(function(a,d){jQuery(d).change(function(a){c&&clearTimeout(c),c=setTimeout(function(){var a=jQuery("#jl-job-search").serializeArray();v(a,!0)},b)})})}function z(){jQuery("#jl-jobs-sort").change(function(b){A(a(this))})}function A(b){var c=b.val().split("_"),d="jl-listing-div",e=c[0],g=c[1];f(d,e,g,"result-container"),a("#jl-sort").val(b.val())}function B(){a("div.map-button").unbind("click"),a("div.map-button").click(function(b){n(a(this).data("map"))})}function C(b){a("div.social-button").unbind("click"),a("div.social-button").click(function(c){var d=new RegExp(jobListing.socialURLPlaceholder,"g"),e=new RegExp(jobListing.socialTitlePlaceholder,"g");a(".synved-social-button-share").each(function(){var c=D(this,b);a(this).attr("href",a(this).attr("href").replace(d,c));var f=encodeURIComponent(a(document).attr("title"));a(this).attr("href",a(this).attr("href").replace(e,f))}),p(),a("#jl-social-media-close").click(function(){q(b)})})}function D(b,c){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var d=a(b).data("provider"),f=c;if("mail"!==d){var g=new RegExp(/([?|&]src=)[^\&]+/);f=c.replace(g,"$1"+e[d])}var h=encodeURIComponent(window.location.origin+window.location.pathname+f);return h}function E(){a("div.apply-button").unbind("click"),a("div.apply-button").click(function(b){var c=a(this).data("job"),d=a("#"+c);r(d.data())})}function F(){jQuery(".btn-pagination").each(function(b,c){a(c).click(function(b){b.preventDefault();var c=a(this).html();a(this).hasClass("next")&&(c=parseInt(h())+1),a(this).hasClass("prev")&&(c=parseInt(h())-1),g(c);var d=jQuery("#jl-job-search").serializeArray();v(d)})})}function G(){a("#jl-jobs-page").change(function(b){var c=a(this).val(),d=h(),e=a("#recordperpage").val(),f=Math.ceil((e*(d-1)+1)/c);i(c),g(f);var j=jQuery("#jl-job-search").serializeArray();v(j)})}function H(){a(".jl-show-details, .jl-job-title").click(function(){searchState=currentState,I(this)})}function I(b,c){var c="undefined"==typeof c?!0:c,e=a(b).data("job"),f=a("#"+e);a("#job-detail-div").html(f.html()),a("#search-right").addClass("hidden"),a("#search-left").addClass("hidden"),a("#job-detail-div").removeClass("hidden"),a(".breadcrumb").click(function(){if(jobListing.queryFlag){var b=e.split("-");b=b[1],a("#jl-keywords").val(b),J();var c=X(),f={display:"search",title:d,formString:c.substring(1)};currentState=f,a(document).attr("title",f.title),"function"==typeof window.history.pushState&&window.history.pushState(f,"",c),jobListing.queryFlag=!1}else"function"==typeof window.history.pushState?(console.log("indeed flag: ",jobListing.indeedFlag),jobListing.indeedFlag?(J(),window.history.pushState(searchState,"","?"+searchState.formString),a(document).attr("title",searchState.title)):history.back()):J();jobListing.indeedFlag=!1});var g=f.data("job_img"),h=f.data("loc_img"),i=f.data("vid"),j=f.data("job_title");a(".img-assoc").css("background-image","url("+g+")"),a(".loc-image").html('<img src="'+h+'">'),a(".video-div").html('<div class="youtube-container"><div class="youtube-player" data-id="'+i+'"></div></div>'),K(),B(),E(),C(f.data("detail_url")),a(window).scrollTop(0);var k={display:"detail",title:j+" - Brookdale Careers",queryFlag:jobListing.queryFlag,id:e};currentState=k;var l=f.data("detail_url");a(document).attr("title",k.title),c?("function"==typeof window.history.pushState&&window.history.pushState(k,"",l),"function"==typeof ga&&(ga("set","page",l),ga("send","pageview"))):"function"==typeof window.history.replaceState&&window.history.replaceState(k,"",l)}function J(){a("#job-detail-div").empty(),a("#job-detail-div").addClass("hidden"),a("#search-right").removeClass("hidden"),a("#search-left").removeClass("hidden")}function K(){a(".youtube-player").each(function(){var b=document.createElement("div");b.innerHTML=L(a(this).data("id")),b.onclick=M,a(this).append(b)})}function L(a){return'<img class="youtube-thumb" src="//i.ytimg.com/vi/'+a+'/hqdefault.jpg"><div class="play-button"></div>'}function M(){var a=document.createElement("iframe");a.setAttribute("src","//www.youtube.com/embed/"+this.parentNode.dataset.id+"?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&showinfo=0"),a.setAttribute("frameborder","0"),a.setAttribute("id","youtube-iframe"),a.setAttribute("allowfullscreen","allowfullscreen"),this.parentNode.replaceChild(a,this)}function N(){a("#jl-filter-1-open").click(function(a){a.preventDefault(),j()}),a("#jl-filter-2-open").click(function(a){a.preventDefault(),k()}),a("#jl-filter-2-close").click(function(a){a.preventDefault(),j()})}function O(){a("#jl-clear-filters").click(function(){a("input:checkbox").prop("checked",!1)})}function P(){a("#jl-search-submit").click(function(b){c&&clearTimeout(c),b.preventDefault(),g(1),a("#jl-job-search").submit()}),a("#jl-job-search").submit(function(b){b.preventDefault();var c=a(this).serializeArray();v(c)})}function Q(){a("#jl-msg-close").click(function(){m()}),a("#jl-map-close").click(function(){o()}),a("#jl-apply-now-close").click(function(){u()})}function R(){a(".checkmark-li").click(function(b){b.target===this&&a(this).find('input[type="checkbox"]').click()})}function S(){a(".btn-join").click(function(){window.open("https://career.staffingsoft.com/careers/brookdalecareers.html")})}function T(){if("ontouchstart"in document.documentElement)for(var a=document.styleSheets.length-1;a>=0;a--){var b=document.styleSheets[a];try{if(b.cssRules)for(var c=b.cssRules.length-1;c>=0;c--){var d=b.cssRules[c];d.selectorText&&(d.selectorText=d.selectorText.replace(":hover",":active"))}}catch(e){if("SecurityError"!==e.name)throw e;continue}}}function U(){N(),O(),x(),P(),Q(),R(),S(),T()}function V(){if(jobListing.queryFlag){var a=W(jobListing.query);if(a.hasOwnProperty("display")&&"details"===a.display[0]){if(!a.hasOwnProperty("j")||!a.j[0].length)return;Z(a)}else{Y(a);var b=jQuery("#jl-job-search").serializeArray();v(b)}}}function W(a){for(var b={},c=a.replace(/\+/g," "),d=decodeURIComponent(c).split("&"),e=0;e<d.length;e++)d[e].length&&(srchPair=d[e].split("="),srchPair[0]=srchPair[0].toLowerCase(),b.hasOwnProperty(srchPair[0])?b[srchPair[0]].push(srchPair[1]):b[srchPair[0]]=[srchPair[1]]);return b}function X(){var b="?"+a("#jl-job-search").serialize();return b=b.replace("keywords=&",""),b=b.replace("zip=&",""),b=b.replace("radius=&","")}function Y(b){var c;a("input:checkbox").prop("checked",!1),a("input:text").val(""),a("#jl-zip-distance").prop("selectedIndex",0);for(c in b)switch(c){case"keywords":a("#jl-keywords").val(b[c][0]);break;case"zip":a("#jl-zipcode").val(b[c][0]);break;case"radius":a("#jl-zip-distance").val(b[c][0]);break;case"pagenumber":a("#pagenumber").val(b[c][0]);break;case"recordperpage":a("#recordperpage").val(b[c][0]);break;case"jlsort":a("#jl-sort").val(b[c][0]);break;case"experiencelevel":case"jobtype":case"jobclass":case"clientcategory":case"officetype":case"key":case"department":case"state":for(var d=0;d<b[c].length;d++)a('#jl-job-search :input[name="'+c+'"][value="'+b[c][d]+'"]').prop("checked",!0)}}function Z(a){var b=[{name:"id",value:a.j[0]},{name:"pagenumber",value:1},{name:"recordperpage",value:10},{name:"jlsort",value:"date_desc"}];console.log("referrer: ",document.referrer);var c=a.hasOwnProperty("src")?a.src[0]:"BSLC";v(b,!1,!0,c)}function $(){window.addEventListener("popstate",function(b){if(oldState=currentState,currentState=b.state,console.log(oldState),console.log(currentState),null===b.state)return void window.location.assign(window.location.href.split("?")[0]);if((null===oldState||"search"===oldState.display)&&"search"===b.state.display)return jobListing.queryFlag=!0,jobListing.query=b.state.formString,console.log("search string: "+b.state.formString),V(),void a(document).attr("title",b.state.title);if("search"===oldState.display&&"detail"===b.state.display){jobListing.queryFlag=b.state.queryFlag;var c=a('.jl-show-details[data-job="'+b.state.id+'"]')[0];return searchState=oldState,I(c,!1),void a(document).attr("title",b.state.title)}return"detail"===oldState.display&&"search"===b.state.display?(J(),void a(document).attr("title",b.state.title)):void 0})}var c,b=3e3,d="Jobs - Brookdale Careers",e={facebook:"fb",twitter:"tw",google_plus:"gg",reddit:"red",pinterest:"pin",linkedin:"li"};jQuery(document).ready(function(){currentState=null,"function"==typeof window.history.pushState&&$(),U(),V()})}(jQuery);